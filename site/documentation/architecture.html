---
layout: template
menu : architecture
title : Architecture
---

              <h2 id="1" >1. Framework overview</h2>

        <p>This section will give you both a high level and a detailed view of Easy Batch's internals.</p>

        <h3>1.1 Macroscopic view</h3>

        <p>The next figure describes Easy Batch from a 10000 foot view:</p>

<div class="row">
    <div class="col-md-10 col-md-offset-1">
        <p class="pull-center"><img class="ebi" src="../img/eb/overview.jpg"/></p>
    </div>
</div>

        <p>Easy Batch is all about processing a data source in batch mode. You can configure its behavior in many ways.</p>
        <p>At the end of execution, the engine gives you a report with several metrics and statistics as well as a detailed log file
        about the job execution.</p>

        <h3>1.2 Mesoscopic view</h3>

        <p>Let's zoom in to see a bit more details about Easy Batch's internals:</p>

<div class="row">
    <div class="col-md-10 col-md-offset-1">
        <p class="pull-center"><img class="ebi" src="../img/eb/overview-meso.jpg"/></p>
    </div>
</div>

        <p>Data read from the data source is first submitted to a pre-processing phase. Here, data is:</p>
        <ul>
            <li>Filtered to keep only relevant parts to be processed</li>
            <li>Parsed to a specific format if necessary</li>
            <li>Mapped to domain objects</li>
            <li>Validated against the application's constraints</li>
        </ul>

        <p>After this pre-processing stage, the data is ready to be processed quietly. It is then submitted to a processing
        pipeline where successive operations are performed on it.</p>

        <h3>1.3 Microscopic view</h3>

        <p>Let's zoom in to the third level.
            The next figure describes Easy Batch's main components and gives you an overview of the framework's architecture:</p>

<div class="row">
    <div class="col-md-10 col-md-offset-1">
        <p class="pull-center"><img class="ebi" src="../img/eb/architecture.jpg"/></p>
    </div>
</div>

              <p>Easy Batch processes data record by record. Depending on the data source type, a record can be a line in a flat file, a row in database, a tag in a XML file, a file in a folder, etc. The main components of the processing engine are:</p>
              <ul>
                  <li>Record reader: reads records <em>sequentially one by one</em> from the data source</li>
                  <li>Record filter chain: a chain of filters to skip undesired records from being processed</li>
                  <li>Record mapper: maps records to domain objects</li>
                  <li>Record validator: applies declared validation constraints on records</li>
                  <li>Processing pipeline: applies business processing logic for each record</li>
              </ul>

            <p>All these components are optional. Easy Batch provides a No Operation implementation for each component.
                You can find all details about these components in the <a href="user-guide.html">user guide</a>.</p>

<div class="bs-callout bs-callout-warning">
    <h5><i class="fa fa-info-circle"></i> Heads up!</h5>
    <p>You can extend this workflow by registering custom listeners to do pre/post processing before and after each step.</p>
</div>

            <p>At the end of execution, you get a report containing several metrics and statistics.
                Easy Batch also gives you a detailed log about what happened in case of failure in any of these steps.</p>

        <p>When a record survives the pre-processing phase, it enters the processing pipeline where it is submitted to a chain of processors:</p>

<div class="row">
    <div class="col-md-10 col-md-offset-1">
        <p class="pull-center"><img class="ebi-small" src="../img/eb/pipeline.jpg"/></p>
    </div>
</div>

        <p>Record type can change from one processor to another. When all the processing pipeline has been applied, the engine moves to the next record.</p>

              <h2 id="workflow">2. Processing workflow</h2>

              <p>The workflow used internally by Easy Batch is illustrated by the next figure and described below:</p>

<div class="row">
    <div class="col-md-10 col-md-offset-1">
        <p class="pull-center"><img class="ebi" src="../img/eb/workflow.jpg"/></p>
    </div>
</div>
                  <ol>
                      <li>The engine reads records one by one from the data source.
                          If the record should be filtered, then the engine skips it and moves to the next one.</li>
                      <li>The record mapper then tries to map the record to an instance of the domain object.
                          If the record is not well formed or cannot be mapped to the domain object,
                          the engine ignores it and moves to the next one.</li>
                      <li>The record validator applies declared validation constraints on the record.
                          If a validation constraint is violated, then the record is rejected.</li>
                      <li>Finally, the business logic is executed by the record processor on the domain object correctly populated with valid data.
                          If an exception occurs during record processing, the engine logs the exception and moves to the next record.</li>
                  </ol>

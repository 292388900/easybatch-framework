---
layout: template
menu : tutorial
title : Job configuration with Spring
---

          <h2>1. Introduction</h2>

          <p>You may want to use Spring dependency injection to configure Easy Batch components like record mapper or processor and declare Easy Batch engine as a Spring bean.
              This can be done using the provided <code><em>EasyBatchFactoryBean</em></code>.</p>
           <p>In this tutorial, you will learn how to use this custom factory bean.</p>

              <h2>2. Try it out</h2>

        <p>You will implement the same application developed in the <a href="./helloworld.html">Hello world tutorial</a> but you will use Spring to configure Easy Batch.</p>
              <p>First, you need to add the <code>easybatch-spring</code> module to your dependencies:</p>

        <div class="bs-callout bs-callout-code">
<pre><code class="xml">&lt;dependency&gt;
    &lt;groupId&gt;org.easybatch&lt;/groupId&gt;
    &lt;artifactId&gt;easybatch-spring&lt;/artifactId&gt;
    &lt;version&gt;{{ site.version }}&lt;/version&gt;
&lt;/dependency&gt;</code></pre>
        </div>

          <p>Then, you can configure Easy Batch components and declare the engine as a Spring bean:</p>

        <div class="bs-callout bs-callout-code">
<pre><code class="xml">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
    &lt;beans xmlns="http://www.springframework.org/schema/beans"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xmlns:util="http://www.springframework.org/schema/util"
           xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.springframework.org/schema/util
       http://www.springframework.org/schema/util/spring-util.xsd"&gt;

        &lt;!-- configure record reader --&gt;
        &lt;bean id="tweetReader" class="org.easybatch.flatfile.FlatFileRecordReader"&gt;
            &lt;constructor-arg ref="file"/&gt;
        &lt;/bean&gt;

        &lt;!-- configure record filter --&gt;
        &lt;bean id="headerRecordFilter" class="org.easybatch.core.filter.HeaderRecordFilter"&gt;

        &lt;/bean&gt;
        &lt;!-- configure record mapper --&gt;
        &lt;bean id="tweetMapper" class="org.easybatch.flatfile.dsv.DelimitedRecordMapper"&gt;
            &lt;constructor-arg&gt;
                &lt;value type="java.lang.Class"&gt;org.easybatch.tutorials.common.Tweet&lt;/value&gt;
            &lt;/constructor-arg&gt;
            &lt;constructor-arg&gt;
                &lt;list&gt;
                    &lt;value&gt;id&lt;/value&gt;
                    &lt;value&gt;user&lt;/value&gt;
                    &lt;value&gt;message&lt;/value&gt;
                &lt;/list&gt;
            &lt;/constructor-arg&gt;
        &lt;/bean&gt;

        &lt;!-- configure record processor --&gt;
        &lt;bean id="tweetProcessor" class="org.easybatch.tutorials.basic.helloworld.TweetProcessor"/&gt;

        &lt;!-- configure Easy Batch engine --&gt;
        &lt;bean id="engine" class="org.easybatch.integration.spring.BatchFactoryBean"&gt;
            &lt;property name="recordReader" ref="tweetReader"/&gt;
            &lt;property name="recordFilter" ref="headerRecordFilter"/&gt;
            &lt;property name="recordMapper" ref="tweetMapper"/&gt;
            &lt;property name="processingPipeline"&gt;
                &lt;list&gt;
                    &lt;ref bean="tweetProcessor"/&gt;
                &lt;/list&gt;
            &lt;/property&gt;
        &lt;/bean&gt;

        &lt;!--utility beans to create a classpath resource for input file--&gt;
        &lt;bean id="resource" class="org.springframework.core.io.ClassPathResource"&gt;
            &lt;constructor-arg value="/org/easybatch/tutorials/basic/keyapis/tweets.csv" /&gt;
        &lt;/bean&gt;

        &lt;util:property-path id="uri" path="resource.URI"/&gt;

        &lt;!-- input file bean --&gt;
        &lt;bean id="file" class="java.io.File"&gt;
            &lt;constructor-arg type="java.net.URI" ref="uri"/&gt;
        &lt;/bean&gt;

    &lt;/beans&gt;</code></pre>
        </div>

<p>Finally, you can get and use Easy Batch engine bean as follows:</p>

        <div class="bs-callout bs-callout-code">
<pre><code class="java">public class Launcher {

    public static void main(String[] args) throws Exception {

        ApplicationContext context =
                new ClassPathXmlApplicationContext("application-context.xml");
        Engine engine = (Engine) context.getBean("engine");
        engine.call();

    }
}</code></pre>
        </div>

        <h3>3. Run the tutorial</h3>

<p>To run this tutorial, proceed as follow:</p>
<div class="bs-callout bs-callout-code">
<pre><code>$>git clone https://github.com/benas/easy-batch.git
$>cd easy-batch
$>mvn install
$>cd easybatch-tutorials
$>mvn exec:java -PrunSpringTutorial
</code></pre>
</div>

<p>You can find the complete source code of this tutorial <a href="https://github.com/benas/easy-batch/tree/master/easybatch-tutorials/src/main/java/org/easybatch/tutorials/advanced/spring" target="_blank">here</a>.</p>

<h2>4. Summary</h2>

<p>In this tutorial, you have learned how to configure Easy Batch using Spring framework.
Note that you can change the processing pipeline by adding/removing processors without recompiling your application thanks to Spring's dependency injection.</p>

<h2>5. What's next?</h2>

        <p>In the next tutorial, you will see how to process data in parallel using Easy Batch. You probably need a break and a coffee
            before starting out <i class="fa fa-smile-o"></i> .</p>

<nav>
    <ul class="pager">
        <li class="previous"><a href="./quartz.html"><span aria-hidden="true">&larr;</span> Job scheduling with Quartz</a></li>
        <li class="next"><a href="./parallel.html">Parallel jobs tutorial <span aria-hidden="true">&rarr;</span></a></li>
    </ul>
</nav>
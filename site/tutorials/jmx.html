---
layout: template
menu : tutorial
title : Job monitoring with JMX
---

              <h2>1. Introduction</h2>

              <p>Easy Batch allows you to monitor job execution and progress at runtime using JMX.
                 The JMX MBean named <code><em>org.easybatch.core.jmx:type=EasyBatchMonitorMBean</em></code>
                  exposes the following attributes:</p>

              <ul>
                  <li>The batch start and end times</li>
                  <li>The data source being processed</li>
                  <li>The total number of records to process</li>
                  <li>The total number of filtered, ignored, rejected, error and successfully processed records</li>
                  <li>The current record being processed</li>
                  <li>And the execution progress</li>
              </ul>

                <p>In order to register this JMX MBean at application's startup, you should enable it using the following API:</p>

<div class="bs-callout bs-callout-code">
<pre><code class="java">Engine engine = new EngineBuilder()
    <strong>.enableJMX(true)</strong>
    .build();</code></pre>
</div>

              <p>You can then use any standard JMX compliant tool such as <a href="http://visualvm.java.net/" target="_blank">VisualVM</a> to visualize monitoring attributes.</p>

              <p>The screenshot below shows an example of Easy Batch monitoring using VisualVM:</p>

              <p class="pull-center">
                  <img src="../img/eb/jmx.png"/>
              </p>
              <br/>

              <h2>2. Try it out</h2>

              <p>In this tutorial, you will use the same application developed in the <a href="../tutorials/helloworld.html" target="_blank">Hello World tutorial</a>.
                  The main difference is that you will build a new slow processor to simulate long running processing:</p>

      <div class="bs-callout bs-callout-code">
          <h5>TweetSlowProcessor.java</h5>
<pre><code class="java">
    public class TweetSlowProcessor implements RecordProcessor&lt;StringRecord, StringRecord&gt; {

    @Override
    public StringRecord processRecord(StringRecord record) throws Exception {

        //slow down the processor for demonstration purpose
        Thread.sleep(3000);

        System.out.println(record.getPayload());
        return record;
    }
}</code></pre>
      </div>

              <p>The complete source code of this tutorial can be found <a href="https://github.com/benas/easy-batch/tree/master/easybatch-tutorials/src/main/java/org/easybatch/tutorials/advanced/jmx" target="_blank">here</a>.</p>

<h2>3. Run the tutorial</h2>

<h3>3.1 From the command line</h3>

              <p>To run the tutorial from scratch, follow these steps:</p>

<div class="bs-callout bs-callout-code">
<pre><code>$>git clone https://github.com/benas/easy-batch.git
$>cd easy-batch
$>mvn install
$>cd easybatch-tutorials
$>mvn exec:java -PrunJmxTutorial
</code></pre>
</div>

              <p>This will run the engine and you should have enough time to launch VisualVM and monitor progress in real time.</p>

              <p>Once you have launched the tutorial, open VisualVM, connect to the jvm process running your batch and navigate to the MBeans tab
                  (if you don't see the MBeans tab, <a href="http://visualvm.java.net/mbeans_tab.html" target="_blank">here</a> is how to install the plugin).</p>

              <p>As described in the screen shot above, navigate to the <code>org.easybatch.core.jmx:type=EasyBatchMonitorMBean</code> MBean and you will be able to monitor the execution progress of the slow Hello World tutorial in real time.</p>

<h3>3.2 From your IDE</h3>

<p>First, you need to checkout the source code of the tutorial available <a href="https://github.com/benas/easy-batch/tree/master/easybatch-tutorials/src/main/java/org/easybatch/tutorials/advanced/jmx" target="_blank">here</a>:</p>

<div class="bs-callout bs-callout-code">
    <pre><code>$>git clone https://github.com/benas/easy-batch.git</code></pre>
</div>

<p>If you do not have git installed, you can download a zip file containing the project's source code from GitHub
    <a href="https://github.com/benas/easy-batch/archive/easybatch-{{ site.version }}.zip">here</a>.</p>

<p>Then, import the <code><em>easybatch-tutorials</em></code> module in you favorite IDE and resolve maven dependencies.</p>

<p>Finally, run the <code><em>org.easybatch.tutorials.advanced.jmx.Launcher</em></code> class without any argument.</p>

<h2>4. Summary</h2>

        <p>In this tutorial, you have learned how to monitor job execution at runtime. Real time monitoring is an
        essential requirement for every production application and Easy Batch provides you this feature with no cost.</p>

<h2>5. What's next?</h2>

<p>In the next tutorial, you will tackle another production requirement which is scheduling job executions.
Easy Batch provides integration with <a href="http://www.quartz-scheduler.org" target="_blank">Quartz</a> to schedule job execution.</p>

<nav>
    <ul class="pager">
        <li class="previous"><a href="./custom-data-format.html"><span aria-hidden="true">&larr;</span> Recipes tutorial</a></li>
        <li class="next"><a href="./quartz.html">Job scheduling with Quartz <span aria-hidden="true">&rarr;</span></a></li>
    </ul>
</nav>